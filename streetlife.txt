local player = game:GetService("Players").LocalPlayer
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Crée un ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ActionRecorderGui"
screenGui.Parent = player:WaitForChild("PlayerGui")

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 400)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(54, 57, 63)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local dragging = false
local dragInput, mousePos, framePos

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        mousePos = input.Position
        framePos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - mousePos
        mainFrame.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X, framePos.Y.Scale, framePos.Y.Offset + delta.Y)
    end
end)

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local tabFrame = Instance.new("Frame")
tabFrame.Size = UDim2.new(0, 100, 1, 0)
tabFrame.Position = UDim2.new(0, 0, 0, 0)
tabFrame.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
tabFrame.BorderSizePixel = 0
tabFrame.Parent = mainFrame

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, -100, 1, 0)
contentFrame.Position = UDim2.new(0, 100, 0, 0)
contentFrame.BackgroundColor3 = Color3.fromRGB(54, 57, 63)
contentFrame.BorderSizePixel = 0
contentFrame.Parent = mainFrame

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local function createTabButton(name, position)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, 50)
    button.Position = UDim2.new(0, 0, 0, position)
    button.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.SourceSans
    button.TextSize = 24
    button.Text = name
    button.Parent = tabFrame
    
    -- Ajoute des coins arrondis aux boutons d'onglets
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = button
    
    return button
end

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local playerTabButton = createTabButton("Player", 0)
local recordTabButton = createTabButton("Record", 50)

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local playerTab = Instance.new("Frame")
playerTab.Size = UDim2.new(1, 0, 1, 0)
playerTab.Position = UDim2.new(0, 0, 0, 0)
playerTab.BackgroundTransparency = 1
playerTab.Visible = true
playerTab.Parent = contentFrame

local recordTab = Instance.new("Frame")
recordTab.Size = UDim2.new(1, 0, 1, 0)
recordTab.Position = UDim2.new(0, 0, 0, 0)
recordTab.BackgroundTransparency = 1
recordTab.Visible = false
recordTab.Parent = contentFrame

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local function switchTab(tab)
    playerTab.Visible = false
    recordTab.Visible = false
    tab.Visible = true
end

playerTabButton.MouseButton1Click:Connect(function() switchTab(playerTab) end)
recordTabButton.MouseButton1Click:Connect(function() switchTab(recordTab) end)

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local playerTitle = Instance.new("TextLabel")
playerTitle.Size = UDim2.new(1, 0, 0, 30)
playerTitle.Position = UDim2.new(0, 0, 0, 0)
playerTitle.BackgroundTransparency = 1
playerTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
playerTitle.Font = Enum.Font.SourceSansBold
playerTitle.TextSize = 20
playerTitle.Text = "Player Controls"
playerTitle.TextXAlignment = Enum.TextXAlignment.Center
playerTitle.Parent = playerTab

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local function executeExternalScript()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
end

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonFly = Instance.new("TextButton")
buttonFly.Size = UDim2.new(0, 200, 0, 50)
buttonFly.Position = UDim2.new(0.5, -100, 0.1, -25)
buttonFly.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
buttonFly.TextColor3 = Color3.fromRGB(255, 255, 255)
buttonFly.Font = Enum.Font.SourceSans
buttonFly.TextSize = 24
buttonFly.Text = "Execute Script"
buttonFly.Parent = playerTab

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonFlyCorner = Instance.new("UICorner")
buttonFlyCorner.CornerRadius = UDim.new(0, 12)
buttonFlyCorner.Parent = buttonFly

buttonFly.MouseButton1Click:Connect(executeExternalScript)

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local recordTitle = Instance.new("TextLabel")
recordTitle.Size = UDim2.new(1, 0, 0, 30)
recordTitle.Position = UDim2.new(0, 0, 0, 0)
recordTitle.BackgroundTransparency = 1
recordTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
recordTitle.Font = Enum.Font.SourceSansBold
recordTitle.TextSize = 20
recordTitle.Text = "BY SWALEYRT https://discord.gg/atbk7jvtdm"
recordTitle.TextXAlignment = Enum.TextXAlignment.Center
recordTitle.Parent = recordTab

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonStartRecording = Instance.new("TextButton")
buttonStartRecording.Size = UDim2.new(0, 200, 0, 50)
buttonStartRecording.Position = UDim2.new(0.5, -100, 0.15, -25)
buttonStartRecording.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
buttonStartRecording.TextColor3 = Color3.fromRGB(255, 255, 255)
buttonStartRecording.Font = Enum.Font.SourceSans
buttonStartRecording.TextSize = 24
buttonStartRecording.Text = "Start Recording"
buttonStartRecording.Parent = recordTab

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonStartRecordingCorner = Instance.new("UICorner")
buttonStartRecordingCorner.CornerRadius = UDim.new(0, 12)
buttonStartRecordingCorner.Parent = buttonStartRecording

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonStopRecording = Instance.new("TextButton")
buttonStopRecording.Size = UDim2.new(0, 200, 0, 50)
buttonStopRecording.Position = UDim2.new(0.5, -100, 0.3, -25)
buttonStopRecording.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
buttonStopRecording.TextColor3 = Color3.fromRGB(255, 255, 255)
buttonStopRecording.Font = Enum.Font.SourceSans
buttonStopRecording.TextSize = 24
buttonStopRecording.Text = "Stop Recording"
buttonStopRecording.Parent = recordTab

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonStopRecordingCorner = Instance.new("UICorner")
buttonStopRecordingCorner.CornerRadius = UDim.new(0, 12)
buttonStopRecordingCorner.Parent = buttonStopRecording

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonStartReplay = Instance.new("TextButton")
buttonStartReplay.Size = UDim2.new(0, 200, 0, 50)
buttonStartReplay.Position = UDim2.new(0.5, -100, 0.45, -25)
buttonStartReplay.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
buttonStartReplay.TextColor3 = Color3.fromRGB(255, 255, 255)
buttonStartReplay.Font = Enum.Font.SourceSans
buttonStartReplay.TextSize = 24
buttonStartReplay.Text = "Start Replay"
buttonStartReplay.Parent = recordTab

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonStartReplayCorner = Instance.new("UICorner")
buttonStartReplayCorner.CornerRadius = UDim.new(0, 12)
buttonStartReplayCorner.Parent = buttonStartReplay

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonStopReplay = Instance.new("TextButton")
buttonStopReplay.Size = UDim2.new(0, 200, 0, 50)
buttonStopReplay.Position = UDim2.new(0.5, -100, 0.6, -25)
buttonStopReplay.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
buttonStopReplay.TextColor3 = Color3.fromRGB(255, 255, 255)
buttonStopReplay.Font = Enum.Font.SourceSans
buttonStopReplay.TextSize = 24
buttonStopReplay.Text = "Stop Replay"
buttonStopReplay.Parent = recordTab

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local buttonStopReplayCorner = Instance.new("UICorner")
buttonStopReplayCorner.CornerRadius = UDim.new(0, 12)
buttonStopReplayCorner.Parent = buttonStopReplay

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local recording = false
local actions = {}
local replaying = false
local replayIndex = 1

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local function recordAction(actionType, data)
    table.insert(actions, {actionType = actionType, data = data, time = tick()})
end

-- BY SWALEYRT https://discord.gg/atbk7jvtdm
local function startRecording()
    recording = true
    actions = {} -- Réinitialise les actions
    print("Enregistrement démarré")
end


local function stopRecording()
    recording = false
    print("Enregistrement arrêté")
end


local function stopReplay()
    replaying = false
end


local function replayActions()
    replaying = true
    local startTime = tick()
    while replaying do
        local currentTime = tick()
        local action = actions[replayIndex]
        if action then
            local delay = (action.time - startTime) / 2 -- Réduit le délai pour accélérer le replay
            if currentTime - startTime >= delay then
                if action.actionType == "Move" and player.Character and player.Character.PrimaryPart then
                    player.Character:SetPrimaryPartCFrame(action.data)
                elseif action.actionType == "KeyPress" then
                    local VirtualInputManager = game:GetService("VirtualInputManager")
                    VirtualInputManager:SendKeyEvent(true, action.data.KeyCode, false, game)
                    wait(action.data.Duration)
                    VirtualInputManager:SendKeyEvent(false, action.data.KeyCode, false, game)
                end
                replayIndex = replayIndex + 1
                if replayIndex > #actions then
                    replayIndex = 1
                    startTime = tick()
                end
            end
        end
        RunService.Heartbeat:Wait()
    end
end


buttonStartRecording.MouseButton1Click:Connect(startRecording)
buttonStopRecording.MouseButton1Click:Connect(stopRecording)
buttonStartReplay.MouseButton1Click:Connect(function()
    if not replaying then
        replayActions() -- Lance la relecture automatiquement lorsque le bouton est cliqué
    end
end)
buttonStopReplay.MouseButton1Click:Connect(stopReplay)


RunService.Stepped:Connect(function()
    if recording and player.Character and player.Character.PrimaryPart then
        recordAction("Move", player.Character.PrimaryPart.CFrame)
    end
end)


UserInputService.InputBegan:Connect(function(input)
    if recording and input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == Enum.KeyCode.E then
        recordAction("KeyPress", {KeyCode = input.KeyCode, Duration = 4}) -- Enregistre avec une durée de 4 secondes
    end
end)
